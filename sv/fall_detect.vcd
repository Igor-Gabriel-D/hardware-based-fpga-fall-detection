$date
	Wed Dec 17 08:47:13 2025
$end
$version
	Icarus Verilog
$end
$timescale
	1ps
$end
$scope module tb_fall_detect $end
$var wire 1 ! fall_detected $end
$var parameter 32 " CLK_FREQ_HZ $end
$var parameter 32 # SAMPLE_RATE_HZ $end
$var parameter 32 $ STILL_TIME_MS $end
$var reg 16 % ax [15:0] $end
$var reg 16 & ay [15:0] $end
$var reg 16 ' az [15:0] $end
$var reg 1 ( clk $end
$var reg 1 ) data_valid $end
$var reg 32 * impact_thresh_sq [31:0] $end
$var reg 1 + rst_n $end
$var reg 32 , still_thresh_sq [31:0] $end
$scope module dut $end
$var wire 16 - ax [15:0] $end
$var wire 16 . ay [15:0] $end
$var wire 16 / az [15:0] $end
$var wire 1 ( clk $end
$var wire 1 ) data_valid $end
$var wire 32 0 impact_thresh_sq [31:0] $end
$var wire 1 + rst_n $end
$var wire 32 1 still_thresh_sq [31:0] $end
$var parameter 32 2 SAMPLE_RATE_HZ $end
$var parameter 32 3 STILL_TIME_MS $end
$var parameter 32 4 TIME_SAMPLES $end
$var reg 32 5 ax_sq [31:0] $end
$var reg 32 6 ay_sq [31:0] $end
$var reg 32 7 az_sq [31:0] $end
$var reg 1 ! fall_detected $end
$var reg 32 8 mag_sq [31:0] $end
$var reg 1 9 mag_valid $end
$var reg 2 : next_state [1:0] $end
$var reg 2 ; state [1:0] $end
$var reg 2 < timer_cnt [-1:0] $end
$upscope $end
$scope task check_impact_with_rest $end
$var reg 16 = x [15:0] $end
$var reg 16 > y [15:0] $end
$var reg 16 ? z [15:0] $end
$var integer 32 @ i [31:0] $end
$upscope $end
$scope task send_sample $end
$var reg 16 A x [15:0] $end
$var reg 16 B y [15:0] $end
$var reg 16 C z [15:0] $end
$upscope $end
$upscope $end
$enddefinitions $end
$comment Show the parameter values. $end
$dumpall
b0 4
b1010 3
b110010 2
b1010 $
b110010 #
b10111110101111000010000000 "
$end
#0
$dumpvars
bx C
bx B
bx A
bx @
bx ?
bx >
bx =
b0 <
b0 ;
b0 :
09
b0 8
b0 7
b0 6
b0 5
b100010010101010001000000 1
b10111110101111000010000000000 0
b0 /
b0 .
b0 -
b100010010101010001000000 ,
0+
b10111110101111000010000000000 *
0)
0(
b0 '
b0 &
b0 %
0!
$end
#10000
1(
#20000
0(
#30000
1(
#40000
0(
#50000
1(
#60000
0(
#70000
1(
#80000
0(
#90000
b1111101000 '
b1111101000 /
b10111011100 &
b10111011100 .
b11111010000 %
b11111010000 -
1)
b1111101000 C
b10111011100 B
b11111010000 A
1+
1(
#100000
0(
#110000
19
b11011101010000001010000 8
b11110100001001000000 7
b1000100101010100010000 6
b1111010000100100000000 5
0)
1(
#120000
0(
#130000
09
1)
1(
#140000
0(
#150000
19
0)
1(
#160000
0(
#170000
09
1)
1(
#180000
0(
#190000
19
0)
1(
#200000
0(
#210000
09
1)
1(
#220000
0(
#230000
19
0)
1(
#240000
0(
#250000
09
1)
1(
#260000
0(
#270000
19
0)
1(
#280000
0(
#290000
09
1)
1(
#300000
0(
#310000
19
0)
1(
#320000
0(
#330000
09
1)
1(
#340000
0(
#350000
19
0)
1(
#360000
0(
#370000
09
1)
1(
#380000
0(
#390000
19
0)
1(
#400000
0(
#410000
09
1)
1(
#420000
0(
#430000
19
0)
1(
#440000
0(
#450000
09
1)
1(
#460000
0(
#470000
19
0)
1(
#480000
0(
#490000
09
b1000000000000000 '
b1000000000000000 /
b1000000000000000 &
b1000000000000000 .
b1100100001111100 %
b1100100001111100 -
1)
b1000000000000000 C
b1000000000000000 B
b1100100001111100 A
b1000000000000000 ?
b1000000000000000 >
b1100100001111100 =
1(
#500000
0(
#510000
b1 :
19
b10001100000010011111110000010000 8
b1000000000000000000000000000000 7
b1000000000000000000000000000000 6
b1100000010011111110000010000 5
0)
1(
#520000
0(
#530000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#540000
0(
#550000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#560000
0(
#570000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#580000
0(
#590000
19
0)
1(
#600000
0(
#610000
0!
b0 ;
09
b1010010011101100 '
b1010010011101100 /
b11000001011100 &
b11000001011100 .
b111111111111111 %
b111111111111111 -
1)
b1010010011101100 C
b11000001011100 B
b111111111111111 A
b1010010011101100 ?
b11000001011100 >
b111111111111111 =
b10 @
1(
#620000
0(
#630000
b1 :
19
b1101001100010001101101010100001 8
b100000011001110011100110010000 7
b1001001000101010000100010000 6
b111111111111110000000000000001 5
b0 <
0)
1(
#640000
0(
#650000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#660000
0(
#670000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#680000
0(
#690000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#700000
0(
#710000
19
0)
1(
#720000
0(
#730000
0!
b0 ;
09
b1101111110110000 '
b1101111110110000 /
b1000000000000000 &
b1000000000000000 .
b111111001000000 %
b111111001000000 -
1)
b1101111110110000 C
b1000000000000000 B
b111111001000000 A
b1101111110110000 ?
b1000000000000000 >
b111111001000000 =
b10 @
1(
#740000
0(
#750000
b1 :
19
b10000010010101110010100100000000 8
b100000101000001100100000000 7
b1000000000000000000000000000000 6
b111110010000110001000000000000 5
b0 <
0)
1(
#760000
0(
#770000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#780000
0(
#790000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#800000
0(
#810000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#820000
0(
#830000
19
0)
1(
#840000
0(
#850000
0!
b0 ;
09
b1000000000000000 '
b1000000000000000 /
b111111111111111 &
b111111111111111 .
b1111100110100000 %
b1111100110100000 -
1)
b1000000000000000 C
b111111111111111 B
b1111100110100000 A
b1000000000000000 ?
b111111111111111 >
b1111100110100000 =
b10 @
1(
#860000
0(
#870000
b1 :
19
b10000000001001111010010000000001 8
b1000000000000000000000000000000 7
b111111111111110000000000000001 6
b1010001010010000000000 5
b0 <
0)
1(
#880000
0(
#890000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#900000
0(
#910000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#920000
0(
#930000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#940000
0(
#950000
19
0)
1(
#960000
0(
#970000
0!
b0 ;
09
b1010011000100000 '
b1010011000100000 /
b111111111111111 &
b111111111111111 .
b1011000110001100 %
b1011000110001100 -
1)
b1010011000100000 C
b111111111111111 B
b1011000110001100 A
b1010011000100000 ?
b1011000110001100 =
b10 @
1(
#980000
0(
#990000
b1 :
19
b1110111100101110110100010010001 8
b11111100011011000010000000000 7
b111111111111110000000000000001 6
b11000000010101110010010010000 5
b0 <
0)
1(
#1000000
0(
#1010000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#1020000
0(
#1030000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#1040000
0(
#1050000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#1060000
0(
#1070000
19
0)
1(
#1080000
0(
#1090000
0!
b0 ;
09
b1011111111001000 '
b1011111111001000 /
b1000000000000000 &
b1000000000000000 .
b111111111111111 %
b111111111111111 -
1)
b1011111111001000 C
b1000000000000000 B
b111111111111111 A
b1011111111001000 ?
b1000000000000000 >
b111111111111111 =
b10 @
1(
#1100000
0(
#1110000
b1 :
19
b10010000000110110000110001000001 8
b10000000111000000110001000000 7
b1000000000000000000000000000000 6
b111111111111110000000000000001 5
b0 <
0)
1(
#1120000
0(
#1130000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#1140000
0(
#1150000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#1160000
0(
#1170000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#1180000
0(
#1190000
19
0)
1(
#1200000
0(
#1210000
0!
b0 ;
09
b1000000000000000 '
b1000000000000000 /
b1000000000000000 &
b1000000000000000 .
b110111100110000 %
b110111100110000 -
1)
b1000000000000000 C
b1000000000000000 B
b110111100110000 A
b1000000000000000 ?
b110111100110000 =
b10 @
1(
#1220000
0(
#1230000
b1 :
19
b10110000010010101010100100000000 8
b1000000000000000000000000000000 7
b1000000000000000000000000000000 6
b110000010010101010100100000000 5
b0 <
0)
1(
#1240000
0(
#1250000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#1260000
0(
#1270000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#1280000
0(
#1290000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#1300000
0(
#1310000
19
0)
1(
#1320000
0(
#1330000
0!
b0 ;
09
b1000000000000000 '
b1000000000000000 /
b1000000000000000 &
b1000000000000000 .
b1000000000000000 %
b1000000000000000 -
1)
b1000000000000000 C
b1000000000000000 B
b1000000000000000 A
b1000000000000000 =
b10 @
1(
#1340000
0(
#1350000
b1 :
19
b11000000000000000000000000000000 8
b1000000000000000000000000000000 7
b1000000000000000000000000000000 6
b1000000000000000000000000000000 5
b0 <
0)
1(
#1360000
0(
#1370000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#1380000
0(
#1390000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#1400000
0(
#1410000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#1420000
0(
#1430000
19
0)
1(
#1440000
0(
#1450000
0!
b0 ;
09
b1001111110000100 '
b1001111110000100 /
b1000000000000000 &
b1000000000000000 .
b100010111000100 %
b100010111000100 -
1)
b1001111110000100 C
b1000000000000000 B
b100010111000100 A
b1001111110000100 ?
b100010111000100 =
b10 @
1(
#1460000
0(
#1470000
b1 :
19
b1110111011000000111101000100000 8
b100100010111010011110000010000 7
b1000000000000000000000000000000 6
b10011000000110011111000010000 5
b0 <
0)
1(
#1480000
0(
#1490000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#1500000
0(
#1510000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#1520000
0(
#1530000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#1540000
0(
#1550000
19
0)
1(
#1560000
0(
#1570000
0!
b0 ;
09
b1000000000000000 '
b1000000000000000 /
b1100110011011000 &
b1100110011011000 .
b111111111111111 %
b111111111111111 -
1)
b1000000000000000 C
b1100110011011000 B
b111111111111111 A
b1000000000000000 ?
b1100110011011000 >
b111111111111111 =
b10 @
1(
#1580000
0(
#1590000
b1 :
19
b10001010001101111111011001000001 8
b1000000000000000000000000000000 7
b1010001110001111011001000000 6
b111111111111110000000000000001 5
b0 <
0)
1(
#1600000
0(
#1610000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#1620000
0(
#1630000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#1640000
0(
#1650000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#1660000
0(
#1670000
19
0)
1(
#1680000
0(
#1690000
0!
b0 ;
09
b1000011010101000 '
b1000011010101000 /
b1001110100101100 &
b1001110100101100 .
b1011001111101000 %
b1011001111101000 -
1)
b1000011010101000 C
b1001110100101100 B
b1011001111101000 A
b1000011010101000 ?
b1001110100101100 >
b1011001111101000 =
b10 @
1(
#1700000
0(
#1710000
b1 :
19
b1110110010010011001000000010000 8
b111001100001000100111001000000 7
b100110001001101111111110010000 6
b10110100111100100001001000000 5
b0 <
0)
1(
#1720000
0(
#1730000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#1740000
0(
#1750000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#1760000
0(
#1770000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#1780000
0(
#1790000
19
0)
1(
#1800000
0(
#1810000
0!
b0 ;
09
b1000000000000000 '
b1000000000000000 /
b111111111111111 &
b111111111111111 .
b111111111111111 %
b111111111111111 -
1)
b1000000000000000 C
b111111111111111 B
b111111111111111 A
b1000000000000000 ?
b111111111111111 >
b111111111111111 =
b10 @
1(
#1820000
0(
#1830000
b1 :
19
b10111111111111100000000000000010 8
b1000000000000000000000000000000 7
b111111111111110000000000000001 6
b111111111111110000000000000001 5
b0 <
0)
1(
#1840000
0(
#1850000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#1860000
0(
#1870000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#1880000
0(
#1890000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#1900000
0(
#1910000
19
0)
1(
#1920000
0(
#1930000
0!
b0 ;
09
b1001011111101100 '
b1001011111101100 /
b1000000000000000 &
b1000000000000000 .
b1111001000000000 %
b1111001000000000 -
1)
b1001011111101100 C
b1000000000000000 B
b1111001000000000 A
b1001011111101100 ?
b1000000000000000 >
b1111001000000000 =
b10 @
1(
#1940000
0(
#1950000
b1 :
19
b1101011000101000100000110010000 8
b101010010100000100000110010000 7
b1000000000000000000000000000000 6
b110001000000000000000000 5
b0 <
0)
1(
#1960000
0(
#1970000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#1980000
0(
#1990000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#2000000
0(
#2010000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#2020000
0(
#2030000
19
0)
1(
#2040000
0(
#2050000
0!
b0 ;
09
b1001000000111100 '
b1001000000111100 /
b1000000000000000 &
b1000000000000000 .
b10101111111100 %
b10101111111100 -
1)
b1001000000111100 C
b1000000000000000 B
b10101111111100 A
b1001000000111100 ?
b10101111111100 =
b10 @
1(
#2060000
0(
#2070000
b1 :
19
b1111000010110100010111000100000 8
b110000110010111000111000010000 7
b1000000000000000000000000000000 6
b111100011101010000000010000 5
b0 <
0)
1(
#2080000
0(
#2090000
b0 :
b1 ;
09
b1100100 '
b1100100 /
b11001000 &
b11001000 .
b100101100 %
b100101100 -
1)
b1100100 C
b11001000 B
b100101100 A
b0 @
1(
#2100000
0(
#2110000
b10 :
19
b100010001011100000 8
b10011100010000 7
b1001110001000000 6
b10101111110010000 5
0)
1(
#2120000
0(
#2130000
b0 :
1!
b1 <
b10 ;
09
1)
b1 @
1(
#2140000
0(
#2150000
19
0)
1(
#2160000
0(
#2170000
0!
b0 ;
09
b10 @
1(
#2180000
0(
#2190000
b0 <
1(
#2200000
0(
#2210000
1(
#2220000
0(
#2230000
1(
#2240000
0(
#2250000
1(
#2260000
0(
#2270000
1(
#2280000
0(
#2290000
1(
#2300000
0(
#2310000
1(
#2320000
0(
#2330000
1(
#2340000
0(
#2350000
1(
#2360000
0(
#2370000
1(
